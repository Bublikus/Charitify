import{S as t,i as n,s as a,M as e,c as o,d as l,q as s,f as r,g as c,k as i,n as f,o as g,r as m,u as $,v as d,I as p,J as u,K as h,N as x,O as y,Q as v,E as w,U as z}from"./client.5f818e6f.js";function M(t,n,a){const e=t.slice();return e[6]=n[a],e}function B(t){let n;const a=new z({props:{lat:t[6].location.lat,lng:t[6].location.lng}});return{c(){l(a.$$.fragment)},l(t){i(a.$$.fragment,t)},m(t,e){g(a,t,e),n=!0},p(t,n){const e={};1&n&&(e.lat=t[6].location.lat),1&n&&(e.lng=t[6].location.lng),a.$set(e)},i(t){n||(m(a.$$.fragment,t),n=!0)},o(t){$(a.$$.fragment,t),n=!1},d(t){d(a,t)}}}function E(t){let n,a,e=t[0],o=[];for(let n=0;n<e.length;n+=1)o[n]=B(M(t,e,n));const l=t=>$(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=h()},l(t){for(let n=0;n<o.length;n+=1)o[n].l(t);n=h()},m(t,e){for(let n=0;n<o.length;n+=1)o[n].m(t,e);f(t,n,e),a=!0},p(t,a){if(1&a){let s;for(e=t[0],s=0;s<e.length;s+=1){const l=M(t,e,s);o[s]?(o[s].p(l,a),m(o[s],1)):(o[s]=B(l),o[s].c(),m(o[s],1),o[s].m(n.parentNode,n))}for(x(),s=e.length;s<o.length;s+=1)l(s);y()}},i(t){if(!a){for(let t=0;t<e.length;t+=1)m(o[t]);a=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)$(o[t]);a=!1},d(t){v(o,t),t&&r(n)}}}function N(t){let n,a;const p=new e({props:{center:t[2],$$slots:{default:[E]},$$scope:{ctx:t}}});return p.$on("ready",t[3]),{c(){n=o(),l(p.$$.fragment),this.h()},l(t){s('[data-svelte="svelte-1vy6te4"]',document.head).forEach(r),n=c(t),i(p.$$.fragment,t),this.h()},h(){document.title="Charitify - Map of organizations."},m(t,e){f(t,n,e),g(p,t,e),a=!0},p(t,[n]){const a={};513&n&&(a.$$scope={dirty:n,ctx:t}),p.$set(a)},i(t){a||(m(p.$$.fragment,t),a=!0)},o(t){$(p.$$.fragment,t),a=!1},d(t){t&&r(n),d(p,t)}}}function O(t,n,a){let e;const{page:o}=p();u(t,o,t=>a(4,e=t));let l=e.params.mapid||"mapid",s=[];return[s,o,void 0,async function({detail:t}){a(0,s=await w.getOrganizations()),console.log(s);const n=(t,n)=>Math[t](...s.map(t=>t.location[n])),e=[[n("min","lng")+-2,n("min","lat")+-2],[n("max","lng")- -2,n("max","lat")- -2]],o=s.filter(t=>t.id===l)[0];o?t.flyTo({center:[o.location.lng,o.location.lat],zoom:10}):t.fitBounds(e)}]}export default class extends t{constructor(t){super(),n(this,t,O,N,a,{})}}
