<script>
    import { stores } from '@sapper/app'
    import { onMount } from 'svelte'
    import { api } from '../../services'
    import { classnames } from '../../utils'
    import {
        Footer,
        Comments,
        Documents,
        TrustButton,
        DonatorsList,
    } from '../../layouts'
    import {
        Icon,
        Card,
        Avatar,
        Button,
        Picture,
        Progress,
        Carousel,
    } from '../../components'

    const { page } = stores()
    let charityId = $page.params.id

    // Entity
    let charity = {}
    $: carousel = (charity.avatars || []).map(p => ({ src: p, alt: 'photo' }))
    onMount(async () => {
        charity = await api.getFund(1)
    })

    // Trust button
    let active = false
    async function onClick() {
        active = !active
    }

    // Donate button
    let activeDonateBtn = false
    onMount(() => setTimeout(() => activeDonateBtn = true, 500))
    $: classPropDonateBtn = classnames('donate-btn', { active: activeDonateBtn })
    function onDonate() {
        alert('–î—è–∫—É—é! ü•∞')
    }
</script>

<svelte:head>
    <title>Charitify - Charity page and donate.</title>
</svelte:head>

<style>
    table tr:not(:last-child) td {
        padding-bottom: 16px;
    }

    table td:last-child {
        font-weight: 300;
    }

    .donate-btn {
        position: fixed;
        left: 0;
        bottom: -1px;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        font-weight: 600;
        font-size: 1.85em;
        line-height: 1.26;
        color: rgba(var(--color-white));
        padding: 20px;
        text-align: center;
        transition: .3s ease-in-out;
        transform: translateY(100%);
        background-color: rgba(var(--color-success));
    }

    .donate-btn.active {
        transform: none
    }
</style>

<section class="container scroll-box theme-bg-color-secondary">

    <br>
    <br>

    <section class="flex" style="height: 200px">
        <Carousel items={carousel}/>
    </section>

    <br>

    <Button class="white">
        <div class="flex flex-align-center flex-justify-start full-width">
            <s></s>
            <div class="flex" style="max-width: 45px; height: 40px; overflow: hidden">
                <Picture
                        src="./assets/dimsirka.jpg"
                        size="contain"
                        alt="logo"
                />
            </div>
            <s></s>
            <s></s>
            <s></s>
            <h3>"–î—ñ–º –°—ñ—Ä–∫–∞"</h3>
        </div>
    </Button>

    <br>

    <Card class="container">
        <br>
        <br class="small">

        <h2>–ó–±–µ—Ä–µ–∂–µ–º–æ —Ç–≤–∞—Ä–∏–Ω —Ä–∞–∑–æ–º</h2>
        <br class="small">
        <h3 class="font-w-normal" style="color: rgba(var(--color-black), .7)">–ó–±—ñ—Ä –≥—Ä–æ—à–µ–π –Ω–∞ –¥–æ–ø–æ–º–æ–≥—É –±–µ–∑–ø—Ä–∏—Ç—É–ª—å–Ω–∏–º
            —Ç–≤–∞—Ä–∏–Ω–∞–º</h3>

        <br>
        <br class="small">

        <p class="font-secondary">
            <span class="h1">3500–≥—Ä–Ω</span>
            <span class="h3"> / 20000–≥—Ä–Ω</span>
        </p>

        <br>

        <Progress value={Math.floor(3500
        / 20000 * 100)}/>

        <br class="big">
    </Card>

    <br class="small">
    <br>

    <p class="container flex flex-justify-between flex-align-center">
        <span class="flex flex-align-center">
            <Icon is="danger" type="heart-filled" size="medium"/>
            <s></s>
            <s></s>
            <span class="font-secondary font-w-600 h3">1</span>
        </span>
        <span class="flex flex-align-center">
            <Icon is="dark" type="eye" size="medium"/>
            <s></s>
            <s></s>
            <span class="font-secondary font-w-600 h3">13</span>
        </span>
    </p>

    <br class="big">

    <h2>–ó–±–µ—Ä–µ–∂–µ–º–æ —Ç–≤–∞—Ä–∏–Ω —Ä–∞–∑–æ–º</h2>
    <br class="small">
    <pre class="font-w-300">
        –¢–µ—Ä–º—ñ–Ω–æ–≤–æ —à—É–∫–∞—î–º–æ –¥–æ–±—Ä—ñ —Ä—É–∫–∏ ü§≤ü•∞
        –ë–∞–¥–¥—ñ –ø—ñ–¥–∫–∏–Ω—É–ª–∏ –ø—ñ–¥ –∫–∞—Ñ–µ –±—ñ–ª—è —Å–∞–º–æ—ó —Ç—Ä–∞—Å–∏!
        –ë—ñ–ª—è –Ω—å–æ–≥–æ –±—É–ª–∏ —Ç—ñ–ª—å–∫–∏ –∑–∞–ª–∏—à–∫–∏ —á–µ—Ä—Å—Ç–≤–æ–≥–æ —Ö–ª—ñ–±–∞... üíî
        –ó–∞ —â–æ –º–æ–∂–Ω–∞ –±—É–ª–æ –ø–æ–∫–∏–Ω—É—Ç–∏ –º–∞–ª—é–∫–∞ –Ω–∞–ø—Ä–∏–∑–≤–æ–ª—è—â–µ? ü•∫
        –í —á–æ–º—É –≤—ñ–Ω –º—ñ–≥ –ø—Ä–æ–≤–∏–Ω–∏—Ç–∏—Å—è? –ô–æ–º—É –≤—Å—å–æ–≥–æ 2 –º—ñ—Å—è—Ü—ñ.
        –ó–∞—Ä–∞–∑ –±—É–¥–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –≤—ñ–¥ –ø–∞—Ä–∞–∑–∏—Ç—ñ–≤ —Ç–∞ –≤–∞–∫—Ü–∏–Ω–∞—Ü—ñ—é üíâ
    </pre>

    <br class="small">

    <p class="flex">
    <Button class="flex flex-align-center" auto size="small">
        <Icon is="dark" type="share" size="medium"/>
        <s></s>
        <s></s>
        <p class="font-w-500">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å</p>
    </Button>
    <s></s>
    <s></s>
    <s></s>
    <s></s>
    <s></s>
    <Button class="flex flex-align-center" auto size="small">
        <Icon is="dark" type="link" size="medium"/>
        <s></s>
        <s></s>
        <p class="font-w-500">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</p>
    </Button>
    </p>

    <br>
    <br>
    <br>

    <section class="flex flex-column flex-align-center flex-justify-center">
        <div style="width: 100px; max-width: 100%">
            <TrustButton isActive={active} on:click={onClick}/>
        </div>
        <br class="small">
        <h2>–Ø –î–æ–≤—ñ—Ä—è—é</h2>
    </section>

    <br>
    <br>
    <br>
    <br>

    <Card class="container">
        <br class="big">

        <div class="flex flex-column flex-align-center">
            <Avatar src="https://placeimg.com/300/300/animal" size="big" alt="–í–æ–ª—Ç–µ—Ä"/>

            <br class="tiny">
            <br>

            <h2>–í–æ–ª—Ç–µ—Ä</h2>
            <br class="tiny">
            <h4 class="font-w-500">Jack Russell Terrier</h4>
        </div>

        <br class="big">

        <section class="flex flex-justify-between">
            <div class="flex flex-center relative" style="width: 90px; height: 90px">
                <Icon type="polygon" is="primary"/>
                <div class="text-white text-center absolute">
                    <h4 class="h1">3</h4>
                    <h4 style="margin-top: -8px">–†–æ–∫–∏</h4>
                </div>
            </div>

            <div class="flex flex-center relative" style="width: 90px; height: 90px">
                <Icon type="polygon" is="info"/>
                <div class="absolute flex" style="width: 44px; height: 44px">
                    <Icon type="male" is="light"/>
                </div>
            </div>

            <div class="flex flex-center relative" style="width: 90px; height: 90px; opacity: .3">
                <Icon type="polygon" is="primary"/>
                <div class="absolute flex flex-column flex-center">
                    <Icon type="cancel-circle" is="light" size="big"/>
                    <span class="text-white text-center h5">C—Ç–µ—Ä–∏–ª—ñ–∑–∞—Ü—ñ—è</span>
                </div>
            </div>
        </section>

        <br class="big">
        <br class="small">

        <h2>–•–∞—Ä–∞–∫—Ç–µ—Ä –í–æ–ª—Ç–µ—Ä–∞: üòÉ</h2>
        <br class="small">
        <p class="font-w-300">
            –î—É–∂–µ –≥—Ä–∞–π–ª–∏–≤–∏–π —ñ –º–∏–ª–∏–π –ø–µ—Å–∏–∫. –õ—é–±–∏—Ç—å –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ —á–∞—Å –∑ —ñ–Ω—à–∏–º–∏ —Å–æ–±–∞–∫–∞–º–∏, –¥—É–∂–µ –ª—é–±–∏—Ç—å –≥—Ä–∞—Ç–∏—Å—å –∑ –¥—ñ—Ç—å–º–∏
        </p>

        <br class="big">

        <h2>–ñ–∏—Ç—Ç—è –í–æ–ª—Ç–µ—Ä–∞</h2>
        <br class="small">
        <table>
            <tbody>
            <tr>
                <td>01.02.2019</td>
                <td>‚Äî</td>
                <td>–ô–æ–≥–æ –ø–µ—Ä—à–∏–π –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</td>
            </tr>
            <tr>
                <td>05.02.2019</td>
                <td>‚Äî</td>
                <td>–ú–∏ –ø—Ä–∏—é—Ç–∏–ª–∏ –π–æ–≥–æ –∑ –≤—É–ª–∏—Ü—ñ</td>
            </tr>
            <tr>
                <td>07.03.2019</td>
                <td>‚Äî</td>
                <td>–ó—Ä–æ–±–∏–ª–∏ –≤–∞–∫—Ü–∏–Ω–∞—Ü—ñ—é –ø—Ä–æ—Ç–∏ –±–ª—ñ—Ö</td>
            </tr>
            <tr>
                <td>23.06.2019</td>
                <td>‚Äî</td>
                <td>–ó–Ω–∞–π—à–æ–≤ –¥–ª—è —Å–µ–±–µ —É–ª—é–±–ª–µ–Ω—É —ñ–≥—Ä–∞—à–∫—É</td>
            </tr>
            </tbody>
        </table>

        <br>
        <br>
        <br>

        <h2>–í–∞–∫—Ü–∏–Ω–∞—Ü—ñ—ó</h2>
        <br>
        <ul class="flex flex-column text-left">
            <li>
                <span class="flex flex-align-center font-w-300">
                    <Icon is="primary" type="checked-circle" size="small"/>
                    <s></s>
                    <s></s>
                    –í—ñ–¥ –±–ª—ñ—Ö
                </span>
            </li>
            <li>
                <br>
                <span class="flex flex-align-center font-w-300">
                    <Icon is="primary" type="checked-circle" size="small"/>
                    <s></s>
                    <s></s>
                    –í—ñ–¥ –ø–∞—Ä–∞–∑–∏—Ç—ñ–≤
                </span>
            </li>
            <li>
                <br>
                <span class="flex flex-align-center font-w-300">
                    <Icon is="danger" type="cancel-circle" size="small"/>
                    <s></s>
                    <s></s>
                    –í—ñ–¥ –≥—Ä–∏–±–∫—ñ–≤
                </span>
            </li>
        </ul>

        <br class="big">
    </Card>

    <br class="big">
    <br class="big">

    <h2>–ù–∞—à—ñ –ø—ñ–∫–ª—É–≤–∞–ª—å–Ω–∏–∫–∏</h2>
    <br class="small">
    <div class="full-container">
        <DonatorsList/>
    </div>

    <br class="big">
    <br class="big">

    <h2>–î–æ–∫—É–º–µ–Ω—Ç–∏</h2>
    <div class="full-container">
        <Documents/>
    </div>

    <br class="big">
    <br class="big">

    <h2>–í—ñ–¥–µ–æ –ø—Ä–æ –í–æ–ª—Ç–µ—Ä–∞</h2>
    <br>
    <section class="flex" style="height: 200px">
        <Carousel items={carousel}/>
    </section>

    <br class="big">
    <br class="big">

    <h2>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h2>
    <br>
    <ul style="list-style: disc outside none; padding-left: var(--screen-padding)" class="h3 font-w-500 font-secondary">
        <li style="padding-bottom: 4px">–í–∏ –ø–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç–∏ –π–æ–º—É –ø–æ—ó—Å—Ç–∏</li>
        <li style="padding-bottom: 4px">–ú–æ–∂–µ—Ç–µ –æ—Å–æ–±–∏—Å—Ç–æ –≤—ñ–¥–≤—ñ–¥–∞—Ç–∏ –π–æ–≥–æ —É –Ω–∞—Å</li>
        <li style="padding-bottom: 4px">–ö—É–ø–∏—Ç–∏ –≤–∞–∫—Ü—ñ–Ω–∞—Ü—ñ—é –¥–ª—è –í–æ–ª—Ç–µ—Ä–∞</li>
        <li style="padding-bottom: 4px">–î–æ–ø–æ–º–æ–≥—Ç–∏ –ª—é–±–∏–º —ñ–Ω—â–∏–º —Å–ø–æ—Å–æ–±–æ–º</li>
    </ul>
    <br class="big">
    <div class="flex">
        <div class="flex flex-align-center font-secondary">
            <Icon size="medium" is="dark" type="phone"/>
            <s></s>
            <s></s>
            <h2>+38 (093) 205-43-92</h2>
        </div>
    </div>
    <br class="small">
    <p class="font-w-300">–ü–æ–¥–∑–≤–æ–Ω—ñ—Ç—å –Ω–∞–º, —è–∫—â–æ —Ö–æ—á–µ—Ç–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –í–æ–ª—Ç–µ—Ä—É</p>

    <br class="big">
    <br class="big">

    <h2>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ</h2>
    <br class="small">
    <div class="full-container">
        <Comments/>
    </div>

    <br class="big">
    <br class="big">
    <br class="big">

    <div class="full-container">
        <Footer/>
    </div>
</section>

<button type="button" class={classPropDonateBtn} on:click={onDonate}>
    <Icon type="coin" size="big" is="light"/>
    <s></s>
    <s></s>
    –î–æ–ø–æ–º–æ–≥—Ç–∏
</button>

